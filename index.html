<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø±ÙˆØ¶Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø© - Ø¹Ù„ÙŠ Ù…Ø­Ù…Ø¯ Ø¨Ù† ÙØ§ØªØ­</title>
    <style>
        @keyframes moveBg { from { background-position: 0 0; } to { background-position: 100px 100px; } }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(rgba(240, 244, 242, 0.8), rgba(240, 244, 242, 0.8)), 
                        url('https://www.transparenttextures.com/patterns/islamic-art.png');
            animation: moveBg 25s linear infinite;
            text-align: center; padding: 20px; margin: 0;
        }
        .container { 
            max-width: 600px; margin: 20px auto; background: rgba(255, 255, 255, 0.95); 
            padding: 25px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 10px solid #2d5a27;
        }
        h1 { color: #2d5a27; font-size: 1.8em; margin: 0; }
        .subtitle { color: #b8860b; font-weight: bold; margin-bottom: 20px; }
        
        .prayer-timer { background: #2d5a27; color: white; padding: 15px; border-radius: 15px; margin-bottom: 20px; border: 2px solid #b8860b; }
        #timerDisplay { font-size: 1.4em; color: #ffeb3b; }
        
        .section-box { margin-top: 15px; padding: 15px; background: #f9f9f9; border-radius: 12px; border: 1px solid #eee; position: relative; }
        label { font-weight: bold; color: #2d5a27; display: block; margin-bottom: 8px; }
        
        .select-wrapper { display: flex; gap: 10px; align-items: center; }
        select { flex: 1; padding: 12px; border-radius: 10px; border: 2px solid #2d5a27; font-size: 1em; cursor: pointer; }
        
        .download-btn { 
            background: #b8860b; color: white; border: none; padding: 10px; 
            border-radius: 10px; cursor: pointer; text-decoration: none; font-size: 1.2em;
            display: flex; align-items: center; justify-content: center; width: 45px; height: 45px;
        }
        .download-btn:hover { background: #2d5a27; }

        .player-area { margin-top: 20px; padding: 15px; background: #fff; border-radius: 15px; border: 2px dashed #2d5a27; }
        audio { width: 100%; height: 45px; }
        #statusText { color: #b8860b; font-weight: bold; margin-bottom: 10px; }
        
        .whatsapp-btn { display: inline-flex; align-items: center; gap: 10px; background-color: #25d366; color: white; padding: 12px 25px; border-radius: 30px; text-decoration: none; font-weight: bold; margin-top: 20px; }
        footer { margin-top: 30px; font-size: 0.9em; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø±ÙˆØ¶Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</h1>
        <div class="subtitle">Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬: Ø¹Ù„ÙŠ Ù…Ø­Ù…Ø¯ Ø¨Ù† ÙØ§ØªØ­</div>

        <div class="prayer-timer">
            <div id="prayerName">ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ...</div>
            <div id="timerDisplay">00:00:00</div>
            <div id="locationTag" style="font-size: 0.7em; opacity: 0.8;">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª Ø­Ø³Ø¨ Ù…ÙˆÙ‚Ø¹Ùƒ</div>
        </div>

        <div class="section-box">
            <label>ğŸ“– Ø§Ù„Ù…ØµØ­Ù Ø§Ù„ÙƒØ§Ù…Ù„ (Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ):</label>
            <div class="select-wrapper">
                <select id="surahSelect" onchange="playMedia(this)"><option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø© --</option></select>
                <button class="download-btn" onclick="downloadCurrent('surahSelect')" title="ØªØ­Ù…ÙŠÙ„">ğŸ“¥</button>
            </div>
        </div>

        <div class="section-box">
            <label>â˜€ï¸ Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠØ©:</label>
            <div class="select-wrapper">
                <select id="azkarSelect" onchange="playMedia(this)">
                    <option value="">-- Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ø£Ø°ÙƒØ§Ø± --</option>
                    <option value="https://archive.org/download/AzkarMorningEvening/01.mp3">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</option>
                    <option value="https://archive.org/download/AzkarMorningEvening/02.mp3">Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</option>
                </select>
                <button class="download-btn" onclick="downloadCurrent('azkarSelect')" title="ØªØ­Ù…ÙŠÙ„">ğŸ“¥</button>
            </div>
        </div>

        <div class="section-box">
            <label>ğŸ¤² Ø£Ø¯Ø¹ÙŠØ© ÙˆØ±Ù‚ÙŠØ© Ø´Ø±Ø¹ÙŠØ©:</label>
            <div class="select-wrapper">
                <select id="duaSelect" onchange="playMedia(this)">
                    <option value="">-- Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© --</option>
                    <option value="https://server12.mp3quran.net/maher/118.mp3">Ø¯Ø¹Ø§Ø¡ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†</option>
                    <option value="https://ia800602.us.archive.org/20/items/rahmh_202601/roqia.mp3">Ø§Ù„Ø±Ù‚ÙŠØ© Ø§Ù„Ø´Ø±Ø¹ÙŠØ©</option>
                </select>
                <button class="download-btn" onclick="downloadCurrent('duaSelect')" title="ØªØ­Ù…ÙŠÙ„">ğŸ“¥</button>
            </div>
        </div>

        <div class="player-area">
            <div id="statusText">ğŸ”Š Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ´ØºÙŠÙ„...</div>
            <audio id="mainAudio" controls preload="auto"></audio>
        </div>

        <a href="https://wa.me/967773363750" class="whatsapp-btn" target="_blank">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</a>
    </div>

    <footer>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2026 - Ø¹Ù„ÙŠ Ù…Ø­Ù…Ø¯ Ø¨Ù† ÙØ§ØªØ­</footer>

    <script>
        // Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        function getPrayerTimes() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (position) => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    try {
                        const response = await fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lng}&method=4`);
                        const data = await response.json();
                        setupTimer(data.data.timings);
                        document.getElementById('locationTag').innerText = "Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª Ù…Ø¶Ø¨ÙˆØ·Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ";
                    } catch (e) { fallbackSanaa(); }
                }, () => { fallbackSanaa(); });
            } else { fallbackSanaa(); }
        }

        async function fallbackSanaa() {
            const response = await fetch('https://api.aladhan.com/v1/timingsByCity?city=Sanaa&country=Yemen&method=4');
            const data = await response.json();
            setupTimer(data.data.timings);
            document.getElementById('locationTag').innerText = "Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª Ø­Ø³Ø¨ ØªÙˆÙ‚ÙŠØª Ø§Ù„ÙŠÙ…Ù† (Ø§ÙØªØ±Ø§Ø¶ÙŠ)";
        }

        function setupTimer(timings) {
            const prayers = { "Ø§Ù„ÙØ¬Ø±": timings.Fajr, "Ø§Ù„Ø¸Ù‡Ø±": timings.Dhuhr, "Ø§Ù„Ø¹ØµØ±": timings.Asr, "Ø§Ù„Ù…ØºØ±Ø¨": timings.Maghrib, "Ø§Ù„Ø¹Ø´Ø§Ø¡": timings.Isha };
            setInterval(() => {
                const now = new Date();
                let nextP = null, nextT = null;
                for (let n in prayers) {
                    const [h, m] = prayers[n].split(':');
                    const pt = new Date(); pt.setHours(h, m, 0);
                    if (pt > now) { nextP = n; nextT = pt; break; }
                }
                if (!nextP) { nextP = "Ø§Ù„ÙØ¬Ø±"; nextT = new Date(); nextT.setDate(nextT.getDate() + 1); const [h, m] = prayers["Ø§Ù„ÙØ¬Ø±"].split(':'); nextT.setHours(h, m, 0); }
                const diff = nextT - now;
                const h = Math.floor(diff/3600000), m = Math.floor((diff%3600000)/60000), s = Math.floor((diff%60000)/1000);
                document.getElementById('prayerName').innerText = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ø£Ø°Ø§Ù† ${nextP}:`;
                document.getElementById('timerDisplay').innerText = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            }, 1000);
        }
        getPrayerTimes();

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±
        const surahs = ["Ø§Ù„ÙØ§ØªØ­Ø©","Ø§Ù„Ø¨Ù‚Ø±Ø©","Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†","Ø§Ù„Ù†Ø³Ø§Ø¡","Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©","Ø§Ù„Ø£Ù†Ø¹Ø§Ù…","Ø§Ù„Ø£Ø¹Ø±Ø§Ù","Ø§Ù„Ø£Ù†ÙØ§Ù„","Ø§Ù„ØªÙˆØ¨Ø©","ÙŠÙˆÙ†Ø³","Ù‡ÙˆØ¯","ÙŠÙˆØ³Ù","Ø§Ù„Ø±Ø¹Ø¯","Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…","Ø§Ù„Ø­Ø¬Ø±","Ø§Ù„Ù†Ø­Ù„","Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡","Ø§Ù„ÙƒÙ‡Ù","Ù…Ø±ÙŠÙ…","Ø·Ù‡","Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡","Ø§Ù„Ø­Ø¬","Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†","Ø§Ù„Ù†ÙˆØ±","Ø§Ù„ÙØ±Ù‚Ø§Ù†","Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡","Ø§Ù„Ù†Ù…Ù„","Ø§Ù„Ù‚ØµØµ","Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª","Ø§Ù„Ø±ÙˆÙ…","Ù„Ù‚Ù…Ø§Ù†","Ø§Ù„Ø³Ø¬Ø¯Ø©","Ø§Ù„Ø£Ø­Ø²Ø§Ø¨","Ø³Ø¨Ø£","ÙØ§Ø·Ø±","ÙŠØ³","Ø§Ù„ØµØ§ÙØ§Øª","Øµ","Ø§Ù„Ø²Ù…Ø±","ØºØ§ÙØ±","ÙØµÙ„Øª","Ø§Ù„Ø´ÙˆØ±Ù‰","Ø§Ù„Ø²Ø®Ø±Ù","Ø§Ù„Ø¯Ø®Ø§Ù†","Ø§Ù„Ø¬Ø§Ø«ÙŠØ©","Ø§Ù„Ø£Ø­Ù‚Ø§Ù","Ù…Ø­Ù…Ø¯","Ø§Ù„ÙØªØ­","Ø§Ù„Ø­Ø¬Ø±Ø§Øª","Ù‚","Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª","Ø§Ù„Ø·ÙˆØ±","Ø§Ù„Ù†Ø¬Ù…","Ø§Ù„Ù‚Ù…Ø±","Ø§Ù„Ø±Ø­Ù…Ù†","Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©","Ø§Ù„Ø­Ø¯ÙŠØ¯","Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©","Ø§Ù„Ø­Ø´Ø±","Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©","Ø§Ù„ØµÙ","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†","Ø§Ù„ØªØºØ§Ø¨Ù†","Ø§Ù„Ø·Ù„Ø§Ù‚","Ø§Ù„ØªØ­Ø±ÙŠÙ…","Ø§Ù„Ù…Ù„Ùƒ","Ø§Ù„Ù‚Ù„Ù…","Ø§Ù„Ø­Ø§Ù‚Ø©","Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬","Ù†ÙˆØ­","Ø§Ù„Ø¬Ù†","Ø§Ù„Ù…Ø²Ù…Ù„","Ø§Ù„Ù…Ø¯Ø«Ø±","Ø§Ù„Ù‚ÙŠØ§Ù…Ø©","Ø§Ù„Ø¥Ù†Ø³Ø§Ù†","Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª","Ø§Ù„Ù†Ø¨Ø£","Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª","Ø¹Ø¨Ø³","Ø§Ù„ØªÙƒÙˆÙŠØ±","Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±","Ø§Ù„Ù…Ø·ÙÙÙŠÙ†","Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚","Ø§Ù„Ø¨Ø±ÙˆØ¬","Ø§Ù„Ø·Ø§Ø±Ù‚","Ø§Ù„Ø£Ø¹Ù„Ù‰","Ø§Ù„ØºØ§Ø´ÙŠØ©","Ø§Ù„ÙØ¬Ø±","Ø§Ù„Ø¨Ù„Ø¯","Ø§Ù„Ø´Ù…Ø³","Ø§Ù„Ù„ÙŠÙ„","Ø§Ù„Ø¶Ø­Ù‰","Ø§Ù„Ø´Ø±Ø­","Ø§Ù„ØªÙŠÙ†","Ø§Ù„Ø¹Ù„Ù‚","Ø§Ù„Ù‚Ø¯Ø±","Ø§Ù„Ø¨ÙŠÙ†Ø©","Ø§Ù„Ø²Ù„Ø²Ù„Ø©","Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª","Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©","Ø§Ù„ØªÙƒØ§Ø«Ø±","Ø§Ù„Ø¹ØµØ±","Ø§Ù„Ù‡Ù…Ø²Ø©","Ø§Ù„ÙÙŠÙ„","Ù‚Ø±ÙŠØ´","Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†","Ø§Ù„ÙƒÙˆØ«Ø±","Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†","Ø§Ù„Ù†ØµØ±","Ø§Ù„Ù…Ø³Ø¯","Ø§Ù„Ø¥Ø®Ù„Ø§Øµ","Ø§Ù„ÙÙ„Ù‚","Ø§Ù„Ù†Ø§Ø³"];
        const select = document.getElementById('surahSelect');
        surahs.forEach((n, i) => {
            let opt = document.createElement('option');
            opt.value = `https://server12.mp3quran.net/maher/${(i+1).toString().padStart(3,'0')}.mp3`;
            opt.textContent = `Ø³ÙˆØ±Ø© ${n}`;
            select.appendChild(opt);
        });

        function playMedia(el) {
            const audio = document.getElementById('mainAudio');
            const status = document.getElementById('statusText');
            if(el.value) {
                audio.src = el.value;
                status.textContent = "âœ¨ Ø¬Ø§Ø±Ù ØªØ´ØºÙŠÙ„: " + el.options[el.selectedIndex].text;
                audio.load();
                audio.play();
                document.querySelectorAll('select').forEach(s => { if(s !== el) s.selectedIndex = 0; });
            }
        }

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        function downloadCurrent(selectId) {
            const el = document.getElementById(selectId);
            if(el.value) {
                const link = document.createElement('a');
                link.href = el.value;
                link.download = el.options[el.selectedIndex].text + ".mp3";
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„ØªØ­Ù…ÙŠÙ„");
            }
        }
    </script>
</body>
</html>
